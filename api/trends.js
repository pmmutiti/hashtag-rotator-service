
import axios from 'axios'; import cheerio from 'cheerio'; export default async function handler(req, res) { const region = req.query.region || 'kenya'; console.log(`[Hashtag Rotator] Region requested: ${region}`); const url = `https://trends24.in/${region}/`; try { const { data } = await axios.get(url); const $ = cheerio.load(data); const hashtags = []; $('ol.trend-card li a').each((_, el) => { const text = $(el).text().trim(); if (text.startsWith('#')) { hashtags.push(text); } }); if (hashtags.length === 0) { throw new Error('No hashtags found â€” Trends24 HTML may have changed.'); } res.status(200).json({ hashtags }); } catch (error) { console.error('Crash reason:', error); res.status(500).json({ error: 'Function crashed', details: error.message }); } } 
